# go-socket
### 简介

- 这是一个简单的go语言socket样例

  通信双方为服务器和充电桩。双方建立连接，然后发送或接收消息

  消息共有两种情况：
    - 充电桩主动发送消息，服务器并做回应（如：登陆、获取时间、发送心跳等）
    - 服务器主动发送消息，充电桩接收后做回应（如：设置充电口状态、获取所有充电口状态）
        - 此类情况大多为前端等调用，传递设置等信息，然后将充电桩的返回结果再返回给调用者

- 大概流程
    - 程序开启，建立连接，等待充电桩登陆
    - 登陆后充电桩会主动发送一些指令，如获取时间等，程序作出回应
    - 不断重复部分
        - 程序监听端口，收到前端等设置信息后，发送设置信息到充电桩，再将充电桩的回应信息做处理返回给调用者
        - 收到充电桩的主动消息，作出回应

### 程序结构
- src
    - biu 进制转换相关（从github上拷贝的bie，可以直接使用go get）
    - common 自己的一些进制转换和ip转换等方法
    - configure 读取配置类方法
    - enum 信息类别枚举
    - socket 存放socket相关代码
        - chargingPile 服务器主动发送消息
        - socket_server 服务器被动回应(包括回应充电桩和调用者)
        - parse_date 内含报文结构体date和相关方法
        - controller 主动发送消息所用的监听器
    - xslog 打印消息用
    - zebra_socket main函数和配置文件

#### 备注
- 该程序只上传了部分功能
- 这部分功能的通讯协议在根目录中的Excel中
- 如果读不到配置文件可以放到根目录中
- 程序中有大量注释，方便理解

